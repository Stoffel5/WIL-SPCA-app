@page "/adopt"
@inject IJSRuntime JS

<h2 class="centered-text">Adopt a Pet</h2>

<!-- Side Navigation Bar -->
<div id="sideNavbar" class="side-navbar">
    <a href="javascript:void(0)" class="close-btn" onclick="closeNav()">×</a>
    <a href="/adopt" class="nav-link">Adopt a Pet</a>
    <a href="/awareness" class="nav-link">Awareness</a>
    <a href="/donations" class="nav-link">Donations and Sponsors</a>
    <a href="/volunteer" class="nav-link">Volunteer</a>
    <a href="/gallery" class="nav-link">Gallery</a>
    <a href="/boarding" class="nav-link">Animal Boarding</a>
    <a href="/events" class="nav-link">Events</a>

</div>

<!-- Main content -->
<div class="main-content">
    <button class="open-btn" onclick="openNav()">☰ </button>

    <div class="adopt-container">
        <!-- Search bar -->

        <div class="search-bar">
            <input type="text" placeholder="Search for a dog..." @bind="searchQuery" class="search-input" />
            <button @onclick="SearchDogs" class="search-button">Search</button>
        </div>


        <!-- Carousel for dog pictures -->
        <div id="dogCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < filteredDogs.Count; i++)
                {
                    var dog = filteredDogs[i];
                    <div class="carousel-item @(i == 0 ? "active" : "")" @key="dog.Name">
                        <img src="@dog.ImageUrl" class="d-block w-100 carousel-img" alt="@dog.Name">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>@dog.Name</h5>
                            <p>@dog.Description</p> 
                        </div>
                    </div>
                }
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev" type="button" data-bs-target="#dogCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#dogCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</div>

<script>
    function openNav() {
        document.getElementById("sideNavbar").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("sideNavbar").style.width = "0";
    }

    function initializeCarousel() {
        var carouselElement = document.querySelector('#dogCarousel');
        if (carouselElement) {
            var carouselInstance = bootstrap.Carousel.getInstance(carouselElement);
            if (carouselInstance) {
                carouselInstance.dispose(); 
            }
            new bootstrap.Carousel(carouselElement); 
        }
    }

    window.addEventListener('load', function () {
        initializeCarousel();
    });
</script>

@code {
    private string searchQuery = "";
    private List<Dog> dogs = new List<Dog>
    {
        new Dog { Name = "Buddy", ImageUrl = "css/doggie1.jpg", Description = "Friendly and playful." },
        new Dog { Name = "Max", ImageUrl = "css/doggie2.jpg", Description = "Energetic and loves to run." },
        new Dog { Name = "Bella", ImageUrl = "css/doggie3.jpg", Description = "Gentle and affectionate." },
        new Dog { Name = "Jock", ImageUrl = "css/doggie4.jpg", Description = "Loyal and protective." },
        new Dog { Name = "Blaster", ImageUrl = "css/doggie5.jpg", Description = "Curious and intelligent." },
        new Dog { Name = "Bomber", ImageUrl = "css/doggie6.jpg", Description = "Brave and adventurous." },
        new Dog { Name = "Rocky", ImageUrl = "css/doggie7.jpg", Description = "Playful and outgoing." },
        new Dog { Name = "Angie", ImageUrl = "css/doggie8.jpg", Description = "Calm and easygoing." },
        new Dog { Name = "Bobby", ImageUrl = "css/doggie9.jpg", Description = "Affectionate and loyal." },
    };
    private List<Dog> filteredDogs;

    protected override void OnInitialized()
    {
        filteredDogs = dogs;
    }

    private async Task SearchDogs()
    {
        if (!string.IsNullOrEmpty(searchQuery))
        {
            filteredDogs = dogs.Where(d => d.Name.Contains(searchQuery, StringComparison.OrdinalIgnoreCase)).ToList();
        }
        else
        {
            filteredDogs = dogs;
        }

        
        await JS.InvokeVoidAsync("initializeCarousel");
    }

    public class Dog
    {
        public string Name { get; set; }
        public string ImageUrl { get; set; }
        public string Description { get; set; } 
    }
}

<style>
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
    }

    .centered-text {
        text-align: center;
        font-size: 2em;
        color: #333;
        margin-top: 20px;
    }

    .adopt-container {
        padding: 20px;
        margin: auto;
        max-width: 400px; 
    }

    .search-bar {
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .search-input {
        padding: 12px;
        width: 300px;
        border-radius: 30px;
        border: 1px solid #ccc;
        margin-right: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }

    .search-button {
        padding: 12px 20px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s ease;
    }

        .search-button:hover {
            background-color: #218838;
        }

    .carousel-item img.carousel-img {
        max-height: 400px;
        object-fit: cover;
        border-radius: 15px;
    }

    .carousel-caption {
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 10px;
        padding: 10px;
        color: #fff;
    }

        .carousel-caption p {
            margin: 0;
            font-size: 1em;
            font-weight: 300;
        }

    html, body {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        background-color: #4682B4;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        margin: 0;
        padding: 0;
    }

    .side-navbar {
        height: 100%;
        width: 0;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #343a40;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
        z-index: 100;
    }

        .side-navbar .nav-link {
            padding: 10px 15px;
            font-size: 1.1em;
            color: white;
            display: block;
            transition: background-color 0.3s ease;
        }

            .side-navbar .nav-link:hover {
                background-color: #495057;
            }

        .side-navbar .close-btn {
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 30px;
            color: white;
        }

    .open-btn {
        font-size: 22px;
        cursor: pointer;
        background-color: #007BFF;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 30px;
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 101;
        transition: background-color 0.3s ease;
    }

        .open-btn:hover {
            background-color: #0056b3;
        }

    .main-content {
        padding: 40px;
    }
</style>

<!-- Bootstrap CSS and JS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>



